# Foundry/Anvil Dockerfile for Development Environment
# Provides local Ethereum testnet for smart contract development

FROM ghcr.io/foundry-rs/foundry:latest

# Switch to root to install additional utilities
USER root

# Install additional utilities for debugging and scripting
RUN apt-get update && apt-get install -y \
    curl \
    git \
    jq \
    socat \
    && rm -rf /var/lib/apt/lists/*

# Switch back to foundry user
USER foundry

# Set working directory (aligned with volume mount: ./contracts -> /workspace/contracts)
WORKDIR /workspace/contracts

# Expose Anvil port
EXPOSE 8545

# Default command (can be overridden in docker-compose)
CMD ["anvil", "--host", "0.0.0.0", "--port", "8545", "--chain-id", "31337"]
